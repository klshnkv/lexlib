---
layout: default
---

<div class="post">
  <h1 class="post-title">{{ page.title }}</h1>
  <span class="post-date">{{ page.date | date_to_string }}</span>
  {{ content }}
</div>

{% assign post_raw_description = page.description | default: page.excerpt | default: site.description %}
{% assign post_description = post_raw_description | strip_html | strip_newlines | replace: '  ', ' ' | truncate: 160 %}
{% assign post_image_url = page.og_image | default: site.default_og_image | absolute_url %}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": {{ page.title | jsonify }},
    "description": {{ post_description | jsonify }},
    "datePublished": {{ page.date | date_to_xmlschema | jsonify }},
    "dateModified": {{ page.date | date_to_xmlschema | jsonify }},
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": {{ page.url | absolute_url | jsonify }}
    },
    "author": {
      "@type": "Person",
      "name": {{ page.author | default: "LexLib" | jsonify }}
    },
    "publisher": {
      "@type": "WebSite",
      "name": {{ site.title | jsonify }},
      "url": {{ site.url | append: site.baseurl | jsonify }}
    },
    "image": {{ post_image_url | jsonify }}
  }
</script>

{% assign manual_related = page.related_posts %}
{% if manual_related and manual_related.size > 0 %}
  <div class="related">
    <h2>Related Posts</h2>
    <ul class="related-posts">
      {% for related_url in manual_related %}
        {% assign related_post = site.posts | where: "url", related_url | first %}
        {% if related_post %}
          <li>
            <h3>
              <a href="{{ related_post.url }}">
                {{ related_post.title }}
                <small>{{ related_post.date | date_to_string }}</small>
              </a>
            </h3>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
{% elsif site.related_posts and site.related_posts.size > 0 %}
  <div class="related">
    <h2>Related Posts</h2>
    <ul class="related-posts">
      {% for post in site.related_posts limit:3 %}
        <li>
          <h3>
            <a href="{{ post.url }}">
              {{ post.title }}
              <small>{{ post.date | date_to_string }}</small>
            </a>
          </h3>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}
