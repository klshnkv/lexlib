<!DOCTYPE html>
<html lang="en-us">

  <head>
    {% assign episode_token = "" %}
    {% assign episode_guest = "" %}
    {% if page.layout == "post" and page.title %}
      {% assign episode_token = page.title | split: " " | first %}
      {% assign episode_guest = page.title | remove_first: episode_token | remove_first: " - " | remove_first: " â€“ " | strip %}
    {% endif %}

    {% if page.seo_title %}
      {% assign meta_title = page.seo_title %}
    {% elsif page.layout == "post" and page.title %}
      {% if episode_guest != "" %}
        {% assign meta_title = "Books from Lex Fridman Podcast " | append: episode_token | append: " - " | append: episode_guest | append: " | " | append: site.title %}
      {% else %}
        {% assign meta_title = "Books from Lex Fridman Podcast " | append: page.title | append: " | " | append: site.title %}
      {% endif %}
    {% elsif page.title == "Home" %}
      {% assign meta_title = site.title | append: " | " | append: site.description %}
    {% elsif page.title %}
      {% assign meta_title = page.title | append: " | " | append: site.title %}
    {% else %}
      {% assign meta_title = site.title %}
    {% endif %}

    {% if page.seo_description %}
      {% assign raw_description = page.seo_description %}
    {% elsif page.layout == "post" and page.title %}
      {% if page.description %}
        {% assign raw_description = page.description %}
      {% elsif episode_guest != "" %}
        {% assign raw_description = "Browse the full book list for Lex Fridman Podcast " | append: episode_token | append: " with " | append: episode_guest | append: ", including direct links and episode context." %}
      {% else %}
        {% assign raw_description = "Browse the full book list for Lex Fridman Podcast " | append: page.title | append: ", with direct links and episode context." %}
      {% endif %}
    {% else %}
      {% assign raw_description = page.description | default: page.excerpt | default: site.description %}
    {% endif %}

    {% assign meta_description = raw_description | strip_html | strip_newlines | replace: '  ', ' ' | truncate: 160 %}
    {% assign canonical_url = page.url | absolute_url %}
    {% assign og_image_url = page.og_image | default: site.default_og_image | absolute_url %}
    {% assign og_type = "website" %}
    {% if page.layout == "post" %}
      {% assign og_type = "article" %}
    {% endif %}

    <title>{{ meta_title }}</title>
    <meta name="description" content="{{ meta_description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="qIIgjLJmAwelpQCuSXqm-XbMuxgnYAu3jPnXu0Aj7ok" />
    <link rel="canonical" href="{{ canonical_url }}">
    {% if page.noindex %}
    <meta name="robots" content="noindex,follow">
    {% endif %}

    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:type" content="{{ og_type }}">
    <meta property="og:title" content="{{ meta_title }}">
    <meta property="og:description" content="{{ meta_description }}">
    <meta property="og:url" content="{{ canonical_url }}">
    <meta property="og:image" content="{{ og_image_url }}">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ meta_title }}">
    <meta name="twitter:description" content="{{ meta_description }}">
    <meta name="twitter:image" content="{{ og_image_url }}">

    {% if page.layout == "post" and page.date %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    {% endif %}

    <link rel="stylesheet" href="{{ 'public/css/poole.css' | relative_url }}">
    <link rel="stylesheet" href="{{ 'public/css/hyde.css' | relative_url }}">
    <link rel="stylesheet" href="{{ 'public/css/syntax.css' | relative_url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ '/apple-touch-icon.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ '/favicon-32x32.png' | relative_url }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ '/favicon-16x16.png' | relative_url }}">
    <link rel="alternate" type="application/atom+xml" title="{{ site.title }} Atom Feed" href="{{ '/atom.xml' | absolute_url }}">

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": {{ site.title | jsonify }},
        "url": {{ site.url | append: site.baseurl | jsonify }},
        "description": {{ site.description | jsonify }}
      }
    </script>
  </head>

  <body>

    {% include sidebar.html %}

    <div class="content container">
      {{ content }}
    </div>
    <footer>
      <div class="footer-container">
        <div class="footer-column">
          <!-- Your links go here -->
          <a href="{{ '/about/' | relative_url }}">About</a><br>
          <a href="{{ '/contact/' | relative_url }}">Contact</a><br>
          <a href="{{ '/privacy-policy/' | relative_url }}">Privacy Policy</a>
        </div>
        <div class="footer-column">
          <!-- Your text or other content goes here -->
          <p>Lexlib.io is a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to Amazon.com and affiliated sites.</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; {{ site.time | date: '%Y' }} LexLib</p>
      </div>
    </footer>
  </body>
</html>
